<app-header></app-header>
<div class="page-center">
  <div class="card stack-lg reports-card">
    <header>
      <div>
        <h2>Reportes</h2>
        <div class="muted">Visualiza el resumen de servicios completados por rango de fechas.</div>
      </div>
    </header>

    <div class="reports-filters">
      <div class="field">
        <label class="label" for="from">Desde</label>
        <input id="from" type="date" class="input" [(ngModel)]="from" />
      </div>
      <div class="field">
        <label class="label" for="to">Hasta</label>
        <input id="to" type="date" class="input" [(ngModel)]="to" />
      </div>
      <div class="field reports-filters-action">
        <button class="btn" type="button" (click)="load()">Actualizar</button>
      </div>
    </div>

    <div *ngIf="loading">Cargandoâ€¦</div>
    <div class="error" *ngIf="error">{{ error }}</div>

    <div *ngIf="!loading && !error && data">
      <h3>Total de servicios completados: {{ data.totalCompleted }}</h3>
      <h4>Por tipo de servicio</h4>
      <div class="bars">
        <div class="bar" *ngFor="let kv of (data.byServiceType | keyvalue)">
          <span class="label">{{ kv.key }}</span>
          <div class="track">
            <div class="fill" [style.width.%]="widthPercent(kv.value)"></div>
          </div>
          <span class="value">{{ kv.value }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
