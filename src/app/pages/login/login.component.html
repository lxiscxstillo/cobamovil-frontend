<div class="auth-wrapper">
  <div class="bg-decor">
    <div class="bubble b1"></div>
    <div class="bubble b2"></div>
  </div>

  <form class="auth-card" [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="auth-header">
      <div class="logo-circle">
        <img [src]="logoSrc" (error)="onLogoError()" alt="Coba" style="width:48px; height:auto; display:block;" />
      </div>
      <h1 class="brand">Coba Móvil</h1>
      <p class="subtitle">Peluquería canina a domicilio</p>
    </div>

    <div class="tabs">
      <button type="button" class="tab active">Iniciar sesión</button>
      <a class="tab ghost" routerLink="/registrarse">Registrarse</a>
    </div>

    <div class="stack">
      <label class="label">Usuario</label>
      <div class="input-wrap" [class.invalid]="username?.invalid && (username?.dirty || username?.touched || submitted)">
        <span class="icon user"></span>
        <input id="username" type="text" class="input" formControlName="username" placeholder="Tu usuario" autofocus [attr.aria-invalid]="username?.invalid && (username?.dirty || username?.touched || submitted)" />
      </div>
      <div *ngIf="username?.invalid && (username?.dirty || username?.touched || submitted)" class="error">El usuario es requerido.</div>
    </div>

    <div class="stack">
      <label class="label">contraseña</label>
      <div class="input-wrap" [class.invalid]="password?.invalid && (password?.dirty || password?.touched || submitted)">
        <span class="icon lock"></span>
        <input [type]="showPassword ? 'text' : 'password'" id="password" class="input" formControlName="password" placeholder="Tu contraseña" />
        <button type="button" class="eye" (click)="togglePassword()" aria-label="Mostrar/Ocultar contraseña"></button>
      </div>
      <div *ngIf="password?.invalid && (password?.dirty || password?.touched)" class="error">La contraseña es requerida.</div>
    </div>

    <button class="cta" type="submit" [disabled]="loading || loginForm.invalid">
      <span *ngIf="!loading">Ingresar</span>
      <span *ngIf="loading" class="spinner"></span>
    </button>

    <div class="foot-note">Â¿AÃºn no tienes cuenta? <a routerLink="/registrarse">Crea una</a></div>

    <div class="error banner" *ngIf="errorMessage">{{ errorMessage }}</div>
  </form>
</div>


