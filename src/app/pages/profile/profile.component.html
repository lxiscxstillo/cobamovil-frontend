<app-header></app-header>

<div class="page-center">
  <div class="card stack-lg" style="max-width:560px;">
    <header>
      <div>
        <h2>Mi perfil</h2>
        <div class="muted">Actualiza tu email y teléfono</div>
      </div>
    </header>

    <div class="avatar-lg" aria-hidden="true">{{ (email || 'U').slice(0,1).toUpperCase() }}</div>

    <div class="field">
      <label class="label">Email</label>
      <div class="control"><input class="input" [(ngModel)]="email" (blur)="emailTouched=true" placeholder="tu@email.com" /></div>
      <div class="error" *ngIf="emailTouched && isEmailInvalid()">Ingresa un email válido.</div>
    </div>

    <div class="field">
      <label class="label">Teléfono (WhatsApp)</label>
      <div class="control"><input class="input" [(ngModel)]="phone" (blur)="phoneTouched=true" placeholder="Ej: +573001112233" /></div>
      <div class="hint">Formato: +57 seguido de tu número (7 a 20 dígitos).</div>
      <div class="error" *ngIf="phoneTouched && isPhoneInvalid()">Ingresa un teléfono válido (incluye prefijo país, ej: +57).</div>
    </div>

    <button class="btn" (click)="save()">Guardar cambios</button>
    <div class="success" *ngIf="message">{{ message }}</div>
    <div class="error" *ngIf="error">{{ error }}</div>
  </div>
  
</div>

